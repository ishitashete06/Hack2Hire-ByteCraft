{"ast":null,"code":"import React from \"react\";\nimport { useOnCurrentTargetChange } from \"../components/NavigationTargetContext.js\";\nimport { useConstant } from \"../components/utils/useConstant.js\";\nconst modifierDefaults = {\n  altKey: false,\n  ctrlKey: false,\n  metaKey: false,\n  shiftKey: false\n};\nfunction createShortcutDefinition(shortcut) {\n  const keys = shortcut.split(\"+\");\n  const key = keys.pop();\n  if (!key) return undefined;\n  const modifiers = {};\n  for (const modifier of keys) {\n    modifiers[`${modifier}Key`] = true;\n  }\n  return {\n    ...modifierDefaults,\n    ...modifiers,\n    key\n  };\n}\n/** @internal */\nexport function useHotkey(shortcut, callback) {\n  const inTarget = React.useRef(true);\n  const shortcutDefinition = useConstant(() => createShortcutDefinition(shortcut));\n  useOnCurrentTargetChange((isCurrentTarget, isOverlayed) => {\n    inTarget.current = isCurrentTarget && !isOverlayed;\n    return () => inTarget.current = false;\n  });\n  const eventHandler = React.useCallback(event => {\n    if (!shortcutDefinition) return;\n    if (!inTarget.current) return;\n    if (!Object.keys(shortcutDefinition).every(key => shortcutDefinition[key] === event[key])) return;\n    event.preventDefault();\n    callback();\n  }, [shortcutDefinition, callback]);\n  React.useEffect(() => {\n    document.addEventListener(\"keydown\", eventHandler);\n    return () => document.removeEventListener(\"keydown\", eventHandler);\n  }, [eventHandler]);\n}","map":{"version":3,"names":["React","useOnCurrentTargetChange","useConstant","modifierDefaults","altKey","ctrlKey","metaKey","shiftKey","createShortcutDefinition","shortcut","keys","split","key","pop","undefined","modifiers","modifier","useHotkey","callback","inTarget","useRef","shortcutDefinition","isCurrentTarget","isOverlayed","current","eventHandler","useCallback","event","Object","every","preventDefault","useEffect","document","addEventListener","removeEventListener"],"sources":["../../src/modules/useHotkey.ts"],"sourcesContent":[null],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,wBAAwB,QAAQ,0CAA0C;AACnF,SAASC,WAAW,QAAQ,oCAAoC;AAchE,MAAMC,gBAAgB,GAAc;EAChCC,MAAM,EAAE,KAAK;EACbC,OAAO,EAAE,KAAK;EACdC,OAAO,EAAE,KAAK;EACdC,QAAQ,EAAE;CACb;AAED,SAASC,wBAAwBA,CAACC,QAAgB;EAC9C,MAAMC,IAAI,GAAGD,QAAQ,CAACE,KAAK,CAAC,GAAG,CAAC;EAChC,MAAMC,GAAG,GAAGF,IAAI,CAACG,GAAG,EAAE;EAEtB,IAAI,CAACD,GAAG,EAAE,OAAOE,SAAS;EAE1B,MAAMC,SAAS,GAAuB,EAAE;EAExC,KAAK,MAAMC,QAAQ,IAAIN,IAAI,EAAE;IACzBK,SAAS,CAAC,GAAGC,QAAQ,KAAK,CAAC,GAAG,IAAI;;EAGtC,OAAO;IACH,GAAGb,gBAAgB;IACnB,GAAGY,SAAS;IACZH;GACH;AACL;AAEA;AACA,OAAM,SAAUK,SAASA,CAACR,QAAgB,EAAES,QAAoB;EAC5D,MAAMC,QAAQ,GAAGnB,KAAK,CAACoB,MAAM,CAAU,IAAI,CAAC;EAC5C,MAAMC,kBAAkB,GAAGnB,WAAW,CAAC,MAAMM,wBAAwB,CAACC,QAAQ,CAAC,CAAC;EAEhFR,wBAAwB,CAAC,CAACqB,eAAe,EAAEC,WAAW,KAAI;IACtDJ,QAAQ,CAACK,OAAO,GAAGF,eAAe,IAAI,CAACC,WAAW;IAClD,OAAO,MAAOJ,QAAQ,CAACK,OAAO,GAAG,KAAM;EAC3C,CAAC,CAAC;EAEF,MAAMC,YAAY,GAAGzB,KAAK,CAAC0B,WAAW,CACjCC,KAAoB,IAAI;IACrB,IAAI,CAACN,kBAAkB,EAAE;IACzB,IAAI,CAACF,QAAQ,CAACK,OAAO,EAAE;IACvB,IAAI,CAACI,MAAM,CAAClB,IAAI,CAACW,kBAAkB,CAAC,CAACQ,KAAK,CAACjB,GAAG,IAAIS,kBAAkB,CAACT,GAAG,CAAC,KAAKe,KAAK,CAACf,GAAG,CAAC,CAAC,EAAE;IAE3Fe,KAAK,CAACG,cAAc,EAAE;IACtBZ,QAAQ,EAAE;EACd,CAAC,EACD,CAACG,kBAAkB,EAAEH,QAAQ,CAAC,CACjC;EAEDlB,KAAK,CAAC+B,SAAS,CAAC,MAAK;IACjBC,QAAQ,CAACC,gBAAgB,CAAC,SAAS,EAAER,YAAY,CAAC;IAClD,OAAO,MAAMO,QAAQ,CAACE,mBAAmB,CAAC,SAAS,EAAET,YAAY,CAAC;EACtE,CAAC,EAAE,CAACA,YAAY,CAAC,CAAC;AACtB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}