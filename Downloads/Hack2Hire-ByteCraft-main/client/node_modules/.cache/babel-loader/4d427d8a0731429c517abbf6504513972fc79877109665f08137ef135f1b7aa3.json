{"ast":null,"code":"import { memoize } from \"../../utils/memoize.js\";\nimport { hash as stringHash } from \"../../utils/string.js\";\nimport { ConvertColor } from \"../types/Color/ConvertColor.js\";\nconst CSSVariableRegExp = /var\\(.+\\)/;\nconst colorCache = new Map();\nfunction cachedMultiplyAlpha(s, a) {\n  const key = [s, a];\n  if (CSSVariableRegExp.test(s)) {\n    return s;\n  }\n  return memoize(1000, colorCache, key, () => ConvertColor.multiplyAlpha(s, a));\n}\n/**\n * @param alpha - is optional because SVGs define the alpha as a seperate property\n * @internal\n */\nexport function gradientColorStops(gradient, alpha = 1) {\n  let stops;\n  if (\"stops\" in gradient) {\n    stops = gradient.stops;\n  } else {\n    stops = [{\n      value: gradient.start,\n      position: 0\n    }, {\n      value: gradient.end,\n      position: 1\n    }];\n  }\n  if (alpha === 1) {\n    return stops;\n  } else {\n    return stops.map(stop => ({\n      ...stop,\n      value: cachedMultiplyAlpha(stop.value, alpha)\n    }));\n  }\n}\nexport function gradientColorStopsHash(gradient, alpha) {\n  let result = 0;\n  gradientColorStops(gradient, alpha).forEach(stop => {\n    result ^= stringHash(stop.value) ^ stop.position;\n  });\n  return result;\n}","map":{"version":3,"names":["memoize","hash","stringHash","ConvertColor","CSSVariableRegExp","colorCache","Map","cachedMultiplyAlpha","s","a","key","test","multiplyAlpha","gradientColorStops","gradient","alpha","stops","value","start","position","end","map","stop","gradientColorStopsHash","result","forEach"],"sources":["../../../src/render/utils/gradientColorStops.ts"],"sourcesContent":[null],"mappings":"AAIA,SAASA,OAAO,QAAQ,wBAAwB;AAChD,SAASC,IAAI,IAAIC,UAAU,QAAQ,uBAAuB;AAC1D,SAASC,YAAY,QAAQ,gCAAgC;AAE7D,MAAMC,iBAAiB,GAAG,WAAW;AAErC,MAAMC,UAAU,GAAG,IAAIC,GAAG,EAA4B;AACtD,SAASC,mBAAmBA,CAACC,CAAS,EAAEC,CAAS;EAC7C,MAAMC,GAAG,GAAqB,CAACF,CAAC,EAAEC,CAAC,CAAC;EACpC,IAAIL,iBAAiB,CAACO,IAAI,CAACH,CAAC,CAAC,EAAE;IAC3B,OAAOA,CAAC;;EAEZ,OAAOR,OAAO,CAAC,IAAI,EAAEK,UAAU,EAAEK,GAAG,EAAE,MAAMP,YAAY,CAACS,aAAa,CAACJ,CAAC,EAAEC,CAAC,CAAC,CAAC;AACjF;AAEA;;;;AAIA,OAAM,SAAUI,kBAAkBA,CAC9BC,QAA4C,EAC5CC,KAAK,GAAG,CAAC;EAET,IAAIC,KAAmC;EACvC,IAAI,OAAO,IAAIF,QAAQ,EAAE;IACrBE,KAAK,GAAGF,QAAQ,CAACE,KAAK;GACzB,MAAM;IACHA,KAAK,GAAG,CACJ;MAAEC,KAAK,EAAEH,QAAQ,CAACI,KAAK;MAAEC,QAAQ,EAAE;IAAC,CAAE,EACtC;MAAEF,KAAK,EAAEH,QAAQ,CAACM,GAAG;MAAED,QAAQ,EAAE;IAAC,CAAE,CACvC;;EAGL,IAAIJ,KAAK,KAAK,CAAC,EAAE;IACb,OAAOC,KAAK;GACf,MAAM;IACH,OAAOA,KAAK,CAACK,GAAG,CAACC,IAAI,KAAK;MAAE,GAAGA,IAAI;MAAEL,KAAK,EAAEV,mBAAmB,CAACe,IAAI,CAACL,KAAK,EAAEF,KAAK;IAAC,CAAE,CAAC,CAAC;;AAE9F;AAEA,OAAM,SAAUQ,sBAAsBA,CAACT,QAA4C,EAAEC,KAAa;EAC9F,IAAIS,MAAM,GAAG,CAAC;EACdX,kBAAkB,CAACC,QAAQ,EAAEC,KAAK,CAAC,CAACU,OAAO,CAAEH,IAAuB,IAAI;IACpEE,MAAM,IAAItB,UAAU,CAACoB,IAAI,CAACL,KAAK,CAAC,GAAGK,IAAI,CAACH,QAAQ;EACpD,CAAC,CAAC;EACF,OAAOK,MAAM;AACjB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}