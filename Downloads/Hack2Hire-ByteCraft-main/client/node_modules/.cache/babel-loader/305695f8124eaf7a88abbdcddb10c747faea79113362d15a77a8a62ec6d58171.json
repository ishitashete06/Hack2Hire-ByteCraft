{"ast":null,"code":"import { useDomEvent } from \"framer-motion\";\nimport { useCallback, useRef } from \"react\";\nimport { debounce } from \"../../render/utils/debounce.js\";\nimport { clamp } from \"../../utils/math.js\";\nexport function useWheelScroll(ref, {\n  enabled,\n  initial,\n  prev,\n  direction,\n  constraints,\n  offsetX,\n  offsetY,\n  onScrollStart,\n  onScroll,\n  onScrollEnd\n}) {\n  const isWheelScrollActive = useRef(false);\n  const getPointData = useCallback(() => {\n    const point = getPoint(offsetX, offsetY);\n    const data = {\n      point,\n      velocity: {\n        x: offsetX.getVelocity(),\n        y: offsetY.getVelocity()\n      },\n      offset: {\n        x: point.x - initial.x,\n        y: point.y - initial.y\n      },\n      delta: {\n        x: point.x - prev.x,\n        y: point.y - prev.y\n      }\n    };\n    prev.x = point.x;\n    prev.y = point.y;\n    return data;\n  }, []);\n  let handler;\n  if (enabled) {\n    function clampX(v) {\n      return constraints.current === null ? v : clamp(v, constraints.current.left, constraints.current.right);\n    }\n    function clampY(v) {\n      return constraints.current === null ? v : clamp(v, constraints.current.top, constraints.current.bottom);\n    }\n    function updateX(delta) {\n      offsetX.stop();\n      offsetX.set(clampX(offsetX.get() - delta));\n    }\n    function updateY(delta) {\n      offsetY.stop();\n      offsetY.set(clampY(offsetY.get() - delta));\n    }\n    const debouncedOnScrollEnd = debounce(() => {\n      onScrollEnd && onScrollEnd(getPointData());\n      isWheelScrollActive.current = false;\n    }, 200);\n    handler = e => {\n      e.preventDefault();\n      if (!isWheelScrollActive.current) {\n        const x = offsetX.get();\n        const y = offsetY.get();\n        initial.x = x;\n        initial.y = y;\n        prev.x = x;\n        prev.y = y;\n        onScrollStart && onScrollStart(getPointData());\n        isWheelScrollActive.current = true;\n      }\n      switch (direction) {\n        case \"horizontal\":\n          updateX(e.deltaX);\n          break;\n        case \"vertical\":\n          updateY(e.deltaY);\n          break;\n        default:\n          updateX(e.deltaX);\n          updateY(e.deltaY);\n      }\n      onScroll && onScroll(getPointData());\n      debouncedOnScrollEnd();\n    };\n  }\n  // Appending event directly to DOM as React doesn't have an API for non-passive wheel events.\n  useDomEvent(ref, \"wheel\", handler, {\n    passive: false\n  });\n}\nfunction getPoint(x, y) {\n  return {\n    x: x.get(),\n    y: y.get()\n  };\n}","map":{"version":3,"names":["useDomEvent","useCallback","useRef","debounce","clamp","useWheelScroll","ref","enabled","initial","prev","direction","constraints","offsetX","offsetY","onScrollStart","onScroll","onScrollEnd","isWheelScrollActive","getPointData","point","getPoint","data","velocity","x","getVelocity","y","offset","delta","handler","clampX","v","current","left","right","clampY","top","bottom","updateX","stop","set","get","updateY","debouncedOnScrollEnd","e","preventDefault","deltaX","deltaY","passive"],"sources":["../../../src/components/Scroll/useWheelScroll.ts"],"sourcesContent":[null],"mappings":"AAAA,SAAsCA,WAAW,QAAQ,eAAe;AACxE,SAAoBC,WAAW,EAAEC,MAAM,QAAQ,OAAO;AACtD,SAASC,QAAQ,QAAQ,gCAAgC;AACzD,SAASC,KAAK,QAAQ,qBAAqB;AAe3C,OAAM,SAAUC,cAAcA,CAC1BC,GAAuB,EACvB;EACIC,OAAO;EACPC,OAAO;EACPC,IAAI;EACJC,SAAS;EACTC,WAAW;EACXC,OAAO;EACPC,OAAO;EACPC,aAAa;EACbC,QAAQ;EACRC;AAAW,CACM;EAErB,MAAMC,mBAAmB,GAAGf,MAAM,CAAC,KAAK,CAAC;EAEzC,MAAMgB,YAAY,GAAGjB,WAAW,CAAC,MAAK;IAClC,MAAMkB,KAAK,GAAGC,QAAQ,CAACR,OAAO,EAAEC,OAAO,CAAC;IAExC,MAAMQ,IAAI,GAAG;MACTF,KAAK;MACLG,QAAQ,EAAE;QAAEC,CAAC,EAAEX,OAAO,CAACY,WAAW,EAAE;QAAEC,CAAC,EAAEZ,OAAO,CAACW,WAAW;MAAE,CAAE;MAChEE,MAAM,EAAE;QAAEH,CAAC,EAAEJ,KAAK,CAACI,CAAC,GAAGf,OAAO,CAACe,CAAC;QAAEE,CAAC,EAAEN,KAAK,CAACM,CAAC,GAAGjB,OAAO,CAACiB;MAAC,CAAE;MAC1DE,KAAK,EAAE;QAAEJ,CAAC,EAAEJ,KAAK,CAACI,CAAC,GAAGd,IAAI,CAACc,CAAC;QAAEE,CAAC,EAAEN,KAAK,CAACM,CAAC,GAAGhB,IAAI,CAACgB;MAAC;KACpD;IAEDhB,IAAI,CAACc,CAAC,GAAGJ,KAAK,CAACI,CAAC;IAChBd,IAAI,CAACgB,CAAC,GAAGN,KAAK,CAACM,CAAC;IAEhB,OAAOJ,IAAI;EACf,CAAC,EAAE,EAAE,CAAC;EAEN,IAAIO,OAAkC;EACtC,IAAIrB,OAAO,EAAE;IACT,SAASsB,MAAMA,CAACC,CAAS;MACrB,OAAOnB,WAAW,CAACoB,OAAO,KAAK,IAAI,GAAGD,CAAC,GAAG1B,KAAK,CAAC0B,CAAC,EAAEnB,WAAW,CAACoB,OAAO,CAACC,IAAI,EAAErB,WAAW,CAACoB,OAAO,CAACE,KAAK,CAAC;IAC3G;IAEA,SAASC,MAAMA,CAACJ,CAAS;MACrB,OAAOnB,WAAW,CAACoB,OAAO,KAAK,IAAI,GAAGD,CAAC,GAAG1B,KAAK,CAAC0B,CAAC,EAAEnB,WAAW,CAACoB,OAAO,CAACI,GAAG,EAAExB,WAAW,CAACoB,OAAO,CAACK,MAAM,CAAC;IAC3G;IAEA,SAASC,OAAOA,CAACV,KAAa;MAC1Bf,OAAO,CAAC0B,IAAI,EAAE;MACd1B,OAAO,CAAC2B,GAAG,CAACV,MAAM,CAACjB,OAAO,CAAC4B,GAAG,EAAE,GAAGb,KAAK,CAAC,CAAC;IAC9C;IAEA,SAASc,OAAOA,CAACd,KAAa;MAC1Bd,OAAO,CAACyB,IAAI,EAAE;MACdzB,OAAO,CAAC0B,GAAG,CAACL,MAAM,CAACrB,OAAO,CAAC2B,GAAG,EAAE,GAAGb,KAAK,CAAC,CAAC;IAC9C;IAEA,MAAMe,oBAAoB,GAAGvC,QAAQ,CAAC,MAAK;MACvCa,WAAW,IAAIA,WAAW,CAACE,YAAY,EAAE,CAAC;MAC1CD,mBAAmB,CAACc,OAAO,GAAG,KAAK;IACvC,CAAC,EAAE,GAAG,CAAC;IAEPH,OAAO,GAAIe,CAAa,IAAI;MACxBA,CAAC,CAACC,cAAc,EAAE;MAElB,IAAI,CAAC3B,mBAAmB,CAACc,OAAO,EAAE;QAC9B,MAAMR,CAAC,GAAGX,OAAO,CAAC4B,GAAG,EAAE;QACvB,MAAMf,CAAC,GAAGZ,OAAO,CAAC2B,GAAG,EAAE;QACvBhC,OAAO,CAACe,CAAC,GAAGA,CAAC;QACbf,OAAO,CAACiB,CAAC,GAAGA,CAAC;QACbhB,IAAI,CAACc,CAAC,GAAGA,CAAC;QACVd,IAAI,CAACgB,CAAC,GAAGA,CAAC;QACVX,aAAa,IAAIA,aAAa,CAACI,YAAY,EAAE,CAAC;QAC9CD,mBAAmB,CAACc,OAAO,GAAG,IAAI;;MAGtC,QAAQrB,SAAS;QACb,KAAK,YAAY;UACb2B,OAAO,CAACM,CAAC,CAACE,MAAM,CAAC;UACjB;QACJ,KAAK,UAAU;UACXJ,OAAO,CAACE,CAAC,CAACG,MAAM,CAAC;UACjB;QACJ;UACIT,OAAO,CAACM,CAAC,CAACE,MAAM,CAAC;UACjBJ,OAAO,CAACE,CAAC,CAACG,MAAM,CAAC;;MAGzB/B,QAAQ,IAAIA,QAAQ,CAACG,YAAY,EAAE,CAAC;MACpCwB,oBAAoB,EAAE;IAC1B,CAAC;;EAGL;EACA1C,WAAW,CAACM,GAAG,EAAE,OAAO,EAAEsB,OAAO,EAAE;IAAEmB,OAAO,EAAE;EAAK,CAAE,CAAC;AAC1D;AAEA,SAAS3B,QAAQA,CAACG,CAAsB,EAAEE,CAAsB;EAC5D,OAAO;IAAEF,CAAC,EAAEA,CAAC,CAACiB,GAAG,EAAE;IAAEf,CAAC,EAAEA,CAAC,CAACe,GAAG;EAAE,CAAE;AACrC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}