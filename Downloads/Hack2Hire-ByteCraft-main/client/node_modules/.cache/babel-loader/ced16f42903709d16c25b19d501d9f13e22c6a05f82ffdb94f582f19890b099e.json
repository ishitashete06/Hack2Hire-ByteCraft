{"ast":null,"code":"import React from \"react\";\nimport { cx } from \"../../modules/cx.js\";\nimport { FrameWithMotion } from \"../../render/presentation/Frame/FrameWithMotion.js\";\nimport { injectComponentCSSRules } from \"../../render/utils/injectComponentCSSRules.js\";\nimport { isFiniteNumber } from \"../../render/utils/isFiniteNumber.js\";\nimport { isMotionValue } from \"../../render/utils/isMotionValue.js\";\nimport { useLayoutId } from \"../../render/utils/useLayoutId.js\";\nimport { useIsomorphicLayoutEffect } from \"../../useIsomorphicLayoutEffect.js\";\nimport { EmptyState } from \"../EmptyState.js\";\nimport { useIsInCurrentNavigationTarget } from \"../NavigationContainerContext.js\";\nimport { useEmulateTouchScroll } from \"../utils/useEmulatedTouchScroll.js\";\nimport { useUpdateScrollOffset } from \"../utils/useUpdateScrollOffset.js\";\n/**\n * @private\n */\nexport const NativeScroll = /* @__PURE__ */React.forwardRef(function NativeScroll(props, forwardedRef) {\n  const {\n    direction = \"vertical\",\n    scrollBarVisible = false,\n    dragEnabled = true,\n    contentOffsetX = 0,\n    contentOffsetY = 0,\n    contentWidth,\n    contentHeight,\n    children,\n    resetOffset,\n    onScroll,\n    className,\n    // Not (yet) supported\n    directionLock = false,\n    wheelEnabled = true,\n    scrollAnimate,\n    dragTransition,\n    dragMomentum,\n    dragElastic,\n    overdragEnabled = true,\n    onScrollStart,\n    onScrollEnd,\n    onDragStart,\n    onDrag,\n    onDragEnd,\n    onUpdate,\n    onDirectionLock,\n    layoutId: specificLayoutId,\n    native,\n    // Rest\n    ...containerProps\n  } = props;\n  const layoutId = useLayoutId(props, {\n    specificLayoutId,\n    postfix: \"scroll\"\n  });\n  const fallbackRef = React.useRef(null);\n  const ref = forwardedRef || fallbackRef;\n  const {\n    cancelEmulatedTouchScrollAnimation\n  } = useEmulateTouchScroll(ref, direction, dragEnabled);\n  injectComponentCSSRules();\n  const isInTarget = useIsInCurrentNavigationTarget();\n  const previousIsInTargetRef = React.useRef(isInTarget);\n  const updateScrollOffsetHandler = () => {\n    if (!resetOffset) return;\n    const previousIsTarget = previousIsInTargetRef.current;\n    previousIsInTargetRef.current = isInTarget;\n    const shouldResetOffset = isInTarget && !previousIsTarget;\n    if (!shouldResetOffset) return;\n    const element = ref.current;\n    if (!element) return;\n    if (direction !== \"vertical\") {\n      cancelEmulatedTouchScrollAnimation?.();\n      element.scrollLeft = Math.abs(isMotionValue(contentOffsetX) ? contentOffsetX.get() : contentOffsetX);\n    }\n    if (direction !== \"horizontal\") {\n      cancelEmulatedTouchScrollAnimation?.();\n      element.scrollTop = Math.abs(isMotionValue(contentOffsetY) ? contentOffsetY.get() : contentOffsetY);\n    }\n  };\n  // We only want to update the scroll offset when isInTarget changes\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  useIsomorphicLayoutEffect(updateScrollOffsetHandler, [isInTarget]);\n  useUpdateScrollOffset(ref, \"scrollLeft\", contentOffsetX, cancelEmulatedTouchScrollAnimation);\n  useUpdateScrollOffset(ref, \"scrollTop\", contentOffsetY, cancelEmulatedTouchScrollAnimation);\n  const size = !containerProps.__fromCanvasComponent ? {\n    width: containerProps.__fromCodeComponentNode ? \"100%\" : containerProps.width,\n    height: containerProps.__fromCodeComponentNode ? \"100%\" : containerProps.height\n  } : {};\n  return React.createElement(FrameWithMotion, {\n    ref: ref,\n    \"data-framer-component-type\": \"NativeScroll\",\n    background: \"none\" // need to set here to prevent default background from Frame\n    ,\n    ...containerProps,\n    ...size,\n    onScroll: onScroll,\n    layoutId: layoutId,\n    onBeforeLayoutMeasure: updateScrollOffsetHandler,\n    layoutScroll: true,\n    className: cx(className, `direction-${direction}`, !scrollBarVisible && \"scrollbar-hidden\")\n  }, React.createElement(EmptyState, {\n    children: children,\n    size: {\n      width: isFiniteNumber(containerProps.width) ? containerProps.width : \"100%\",\n      height: isFiniteNumber(containerProps.height) ? containerProps.height : \"100%\"\n    },\n    insideUserCodeComponent: !containerProps.__fromCodeComponentNode,\n    title: \"Scroll\",\n    description: \"Click and drag the connector to any frame on the canvas \\u2192\"\n  }), children);\n});","map":{"version":3,"names":["React","cx","FrameWithMotion","injectComponentCSSRules","isFiniteNumber","isMotionValue","useLayoutId","useIsomorphicLayoutEffect","EmptyState","useIsInCurrentNavigationTarget","useEmulateTouchScroll","useUpdateScrollOffset","NativeScroll","forwardRef","props","forwardedRef","direction","scrollBarVisible","dragEnabled","contentOffsetX","contentOffsetY","contentWidth","contentHeight","children","resetOffset","onScroll","className","directionLock","wheelEnabled","scrollAnimate","dragTransition","dragMomentum","dragElastic","overdragEnabled","onScrollStart","onScrollEnd","onDragStart","onDrag","onDragEnd","onUpdate","onDirectionLock","layoutId","specificLayoutId","native","containerProps","postfix","fallbackRef","useRef","ref","cancelEmulatedTouchScrollAnimation","isInTarget","previousIsInTargetRef","updateScrollOffsetHandler","previousIsTarget","current","shouldResetOffset","element","scrollLeft","Math","abs","get","scrollTop","size","__fromCanvasComponent","width","__fromCodeComponentNode","height","createElement","background","onBeforeLayoutMeasure","layoutScroll","insideUserCodeComponent","title","description"],"sources":["../../../src/components/Scroll/NativeScroll.tsx"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}