{"ast":null,"code":"import { motion } from \"framer-motion\";\nimport React from \"react\";\nimport { useIsomorphicLayoutEffect } from \"../../useIsomorphicLayoutEffect.js\";\nimport { runtime } from \"../../utils/runtimeInjection.js\";\nimport { safeWindow } from \"../../utils/safeWindow.js\";\nimport { isString } from \"../../utils/utils.js\";\nimport { RenderEnvironment, RenderTarget } from \"../types/RenderEnvironment.js\";\nimport { imageRenderingForZoom, minZoomForPixelatedImageRendering } from \"../utils/imageRendering.js\";\nconst wrapperStyle = {\n  position: \"absolute\",\n  borderRadius: \"inherit\",\n  top: 0,\n  right: 0,\n  bottom: 0,\n  left: 0\n};\nconst placeholderStyle = {\n  backgroundSize: \"16px 16px\",\n  backgroundImage: \"repeating-linear-gradient(45deg, rgba(180, 180, 180, 0.8) 0, rgba(180, 180, 180, 0.8) 1px, rgba(255, 255, 255, 0.2) 0, rgba(255, 255, 255, 0.2) 50%)\",\n  border: \"1px solid #c4c4c4\"\n};\nfunction cssObjectFit(imageFit) {\n  switch (imageFit) {\n    case \"fit\":\n      return \"contain\";\n    case \"stretch\":\n      return \"fill\";\n    default:\n      return \"cover\";\n  }\n}\nexport function cssImageRendering(image, containerSize) {\n  if (!containerSize) return \"auto\";\n  // Set appropriate image rendering for the current environment\n  const devicePixelRatio = RenderTarget.current() === RenderTarget.canvas ? safeWindow.devicePixelRatio : 1;\n  const minPixelatedZoom = minZoomForPixelatedImageRendering(image, containerSize, devicePixelRatio);\n  if (RenderTarget.current() === RenderTarget.canvas) {\n    // On the canvas we want to always keep image-rendering stable during\n    // zoom (hence the zoom = 1) the canvas pixelates the images on zooming\n    // in with a css rule.\n    return imageRenderingForZoom(1, minPixelatedZoom);\n  } else {\n    // In the preview or with export we might require a higher zoom level\n    // where images need to get pixelated if their frame is larger then\n    // their intrinsic size.\n    return imageRenderingForZoom(RenderEnvironment.zoom, minPixelatedZoom);\n  }\n}\nfunction getImageStyle(image, containerSize) {\n  return {\n    display: \"block\",\n    width: \"100%\",\n    height: \"100%\",\n    borderRadius: \"inherit\",\n    objectPosition: \"center\",\n    objectFit: cssObjectFit(image.fit),\n    imageRendering: cssImageRendering(image, containerSize)\n  };\n}\nfunction InnerImage({\n  image,\n  containerSize,\n  nodeId,\n  alt\n}) {\n  const wrapperRef = React.useRef(null);\n  const source = runtime.useImageSource(image, containerSize, nodeId);\n  const imageStyle = getImageStyle(image, containerSize);\n  // These variables should never change for the lifetime of the component so it's fine to conditionally use hooks\n  const isStaticRendering = RenderTarget.current() !== RenderTarget.canvas;\n  if (isStaticRendering) {\n    return React.createElement(\"img\", {\n      src: source,\n      alt: alt ?? image.alt,\n      // We don't need to resolve srcSet with useImageSource,\n      // because these are currently only used in generated\n      // components, where resolution happens during\n      // code-generation.\n      srcSet: image.srcSet,\n      sizes: image.sizes,\n      style: imageStyle,\n      loading: image.loading\n    });\n  } else {\n    const imageElement = runtime.useImageElement(image, containerSize, nodeId);\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    useIsomorphicLayoutEffect(() => {\n      const wrapper = wrapperRef.current;\n      if (wrapper === null) return;\n      wrapper.appendChild(imageElement);\n      return () => {\n        wrapper.removeChild(imageElement);\n      };\n    }, [imageElement]);\n    Object.assign(imageElement.style, imageStyle);\n    return React.createElement(\"div\", {\n      ref: wrapperRef,\n      style: {\n        display: \"contents\",\n        borderRadius: \"inherit\"\n      }\n    });\n  }\n}\nexport function BackgroundImageComponent({\n  layoutId,\n  image,\n  ...props\n}) {\n  if (layoutId) {\n    layoutId = layoutId + \"-background\";\n  }\n  const hasImage = isString(image.src);\n  const hasPlaceholder = !hasImage;\n  return React.createElement(motion.div, {\n    layoutId: layoutId,\n    style: hasPlaceholder ? {\n      ...wrapperStyle,\n      ...placeholderStyle\n    } : wrapperStyle,\n    \"data-framer-background-image-wrapper\": true\n  }, hasImage && React.createElement(InnerImage, {\n    image: image,\n    ...props\n  }));\n}","map":{"version":3,"names":["motion","React","useIsomorphicLayoutEffect","runtime","safeWindow","isString","RenderEnvironment","RenderTarget","imageRenderingForZoom","minZoomForPixelatedImageRendering","wrapperStyle","position","borderRadius","top","right","bottom","left","placeholderStyle","backgroundSize","backgroundImage","border","cssObjectFit","imageFit","cssImageRendering","image","containerSize","devicePixelRatio","current","canvas","minPixelatedZoom","zoom","getImageStyle","display","width","height","objectPosition","objectFit","fit","imageRendering","InnerImage","nodeId","alt","wrapperRef","useRef","source","useImageSource","imageStyle","isStaticRendering","createElement","src","srcSet","sizes","style","loading","imageElement","useImageElement","wrapper","appendChild","removeChild","Object","assign","ref","BackgroundImageComponent","layoutId","props","hasImage","hasPlaceholder","div"],"sources":["../../../src/render/style/BackgroundImageComponent.tsx"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}