{"ast":null,"code":"import { animate, animateValue, motionValue, useMotionValue } from \"framer-motion\";\nimport process from \"process\";\nimport React from \"react\";\nimport { FrameWithMotion } from \"../../render/presentation/Frame/FrameWithMotion.js\";\nimport { RenderTarget } from \"../../render/types/RenderEnvironment.js\";\nimport { injectComponentCSSRules } from \"../../render/utils/injectComponentCSSRules.js\";\nimport { isFiniteNumber } from \"../../render/utils/isFiniteNumber.js\";\nimport { isMotionValue } from \"../../render/utils/isMotionValue.js\";\nimport { useLayoutId } from \"../../render/utils/useLayoutId.js\";\nimport { useIsomorphicLayoutEffect } from \"../../useIsomorphicLayoutEffect.js\";\nimport { isReactChild, isReactElement } from \"../../utils/type-guards.js\";\nimport { warnOnce } from \"../../utils/warnOnce.js\";\nimport { EmptyState } from \"../EmptyState.js\";\nimport { useWheelScroll } from \"../Scroll/useWheelScroll.js\";\nimport { makePaddingString, paddingFromProps } from \"../utils/paddingFromProps.js\";\nimport { PageContainer, pageContentWrapperType } from \"./PageContainer.js\";\n/**\n * The Page component allows you to create horizontally or vertically swipeable areas. It can be\n * imported from the Framer Library and used in code components. Add children to create pages to\n * swipe between. These children will be stretched to the size of the page component by default,\n * but can also be set to auto to maintain their original size.\n *\n * @remarks\n * ```jsx\n * import React from \"react\"\n * import { Frame, Page } from \"framer\"\n * export class Page extends React.Component {\n *   render() {\n *     return (\n *       <Page>\n *         <Frame />\n *       </Page>\n *     )\n *   }\n * }\n * ```\n * @public\n */\nexport const Page = /* @__PURE__ */React.forwardRef(function Page(props, forwardedRef) {\n  const {\n    direction = \"horizontal\",\n    contentWidth = \"stretch\",\n    contentHeight = \"stretch\",\n    alignment = \"start\",\n    currentPage = 0,\n    animateCurrentPageUpdate = true,\n    gap: gapValue = 10,\n    padding = 0,\n    momentum = false,\n    dragEnabled = true,\n    defaultEffect = \"none\",\n    background = \"transparent\",\n    overflow = \"hidden\",\n    __fromCodeComponentNode,\n    effect,\n    children,\n    contentOffsetX,\n    contentOffsetY,\n    onChangePage,\n    onScrollStart,\n    onScroll,\n    onDragStart,\n    onDrag,\n    onDragEnd,\n    directionLock,\n    onScrollEnd,\n    onDirectionLock,\n    onUpdate,\n    wheelEnabled = false,\n    layoutId: specificLayoutId,\n    ...rest\n  } = props;\n  const layoutId = useLayoutId(props, {\n    specificLayoutId,\n    postfix: \"page\"\n  });\n  const containerProps = {\n    ...rest,\n    background\n  };\n  const hasMountedRef = React.useRef(false);\n  const hasFixedSize = RenderTarget.hasRestrictions() && props.__fromCodeComponentNode && isFiniteNumber(containerProps.width) && isFiniteNumber(containerProps.height);\n  if (!hasFixedSize && __fromCodeComponentNode && !containerProps.__fromCanvasComponent) {\n    containerProps.width = \"100%\";\n    containerProps.height = \"100%\";\n    containerProps._constraints = {\n      enabled: true\n    };\n  }\n  const {\n    initial,\n    prev\n  } = React.useRef({\n    initial: {\n      x: 0,\n      y: 0\n    },\n    prev: {\n      x: 0,\n      y: 0\n    }\n  }).current;\n  const isHorizontal = direction === \"horizontal\";\n  let gap = gapValue;\n  if (gap < 0) {\n    warnOnce(`The 'gap' property of Page component can not be negative, but is ${gapValue}.`);\n    gap = 0;\n  }\n  injectComponentCSSRules();\n  const pageCount = React.Children.count(children);\n  const maxOffsetRef = React.useRef(0);\n  const constraints = React.useRef({\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0\n  });\n  const fallbackContainerRef = React.useRef(null);\n  const containerRef = forwardedRef || fallbackContainerRef;\n  const scrollableRef = React.useRef(null);\n  const pageEffectValuesRef = React.useRef([]);\n  const pageRectsRef = React.useRef([]);\n  // On the Framer Canvas we need to use `useMotionValue` because it falls\n  // back to a React state update in static mode, allowing the component to\n  // update. Since you cannot conditionally render a hook, we use 0 as the\n  // default value if the React prop is **already** a motion value, and then\n  // simply do not use the returned motion value.\n  const internalX = useMotionValue(isMotionValue(contentOffsetX) ? 0 : contentOffsetX ?? 0);\n  const internalY = useMotionValue(isMotionValue(contentOffsetY) ? 0 : contentOffsetY ?? 0);\n  const contentOffsetRef = React.useRef({\n    x: isMotionValue(contentOffsetX) ? contentOffsetX : internalX,\n    y: isMotionValue(contentOffsetY) ? contentOffsetY : internalY\n  });\n  const currentContentPageRef = React.useRef(currentPage);\n  const propsBoundedCurrentPageRef = React.useRef(currentPage); // Bounded version of props.currentPage\n  const latestPropsRef = React.useRef(props);\n  latestPropsRef.current = props;\n  const lastDirectionRef = React.useRef(props.direction);\n  const snapToPage = useSnapToPage(currentContentPageRef, contentOffsetRef, isHorizontal);\n  const [_, setForceUpdateCount] = React.useState(0);\n  const containerSizeRef = React.useRef({\n    width: 200,\n    height: 200\n  });\n  if (hasFixedSize && isFiniteNumber(containerProps.width) && isFiniteNumber(containerProps.height)) {\n    containerSizeRef.current.width = containerProps.width;\n    containerSizeRef.current.height = containerProps.height;\n  }\n  const updateOnResize = React.useCallback(() => {\n    if (!hasFixedSize) setForceUpdateCount(v => v + 1);\n  }, [hasFixedSize]);\n  // Setup a listener on the window's size. If it changes, and we are in\n  // preview, we may need to render to trigger motion's onLayoutMeasure to\n  // update the constraints.\n  React.useEffect(() => {\n    if (RenderTarget.current() !== RenderTarget.preview) return;\n    globalThis.addEventListener(\"resize\", updateOnResize);\n    return () => {\n      globalThis.removeEventListener(\"resize\", updateOnResize);\n    };\n  }, [updateOnResize]);\n  const applyEffects = () => {\n    pageEffectValuesRef.current.forEach((effectDictionary, index) => {\n      const values = effectValues(index, latestPropsRef, pageRectsRef, contentOffsetRef, maxOffsetRef);\n      if (!effectDictionary || !values) return;\n      for (const [key, value] of Object.entries(values)) {\n        const effectValue = effectDictionary[key];\n        if (isMotionValue(effectValue)) {\n          // Because these are the actual Animatable values passed to the Frame\n          // Updating their value will modify the Frame\n          effectValue.set(value);\n        }\n      }\n    });\n  };\n  const updateMaxOffsetFromPageContents = containerSize => {\n    const newPageContentRects = getPageContentRects(containerRef, containerSize, direction, gap);\n    if (newPageContentRects) pageRectsRef.current = newPageContentRects;\n    const newMaxOffset = getMaxOffset(containerSizeRef.current, pageRectsRef.current, direction, latestPropsRef.current);\n    if (newMaxOffset !== maxOffsetRef.current) {\n      maxOffsetRef.current = newMaxOffset;\n      constraints.current.top = -newMaxOffset;\n      constraints.current.left = -newMaxOffset;\n      /**\n       * @FIXME Without this forced render, if you resize Page on the\n       * canvas when it's current page is not 0, you will see flashes of\n       * the previous page. This happens when the MotionValue for the x or\n       * y offset is out of sync with the size of the Page and the Page\n       * contents, which manifests as the current page not being\n       * transformed far enough from the start point.\n       *\n       * Unfortunately, it's not 100% clear why this force render is\n       * required.\n       *\n       * Since the offset is a Motion Value, its updates are not tied to\n       * React renders, so it stays up to date based on a 60fps render\n       * cycle run by framer-motion. However, this setState is called\n       * inside a useLayoutEffect hook. If an update is scheduled during a\n       * useLayoutEffect hook, painting is deferred until no more updates\n       * are scheduled. In the case of this function, the first\n       * useLayoutEffect after a resize will trigger this React render,\n       * painting will be deferred, and the same useLayoutEffect will run\n       * a second time, finally calling this function a second time. On\n       * the second invocation of this function, since we cache the\n       * previous maxOffset to a ref, this state update will not get\n       * called. Since no updates are scheduled in the second render,\n       * React will finally paint the update.\n       *\n       * Since this bug only happens in Safari in some circumstances when\n       * resizing on the canvas at 60fps, it's possible that there is a\n       * case where when we do not defer painting in the first\n       * useLayoutEffect, the React render and the MotionValue update are\n       * not in sync, causing a brief flash.\n       *\n       * However, if we can figure out a way to ensure those updates\n       * happen in sync, we should remove this React render as it is\n       * unnecessary and will only hinder performance when used elsewhere,\n       * such as generated components where you can resize a Page while\n       * performing a page transition.\n       */\n      if (RenderTarget.current() === RenderTarget.canvas) setForceUpdateCount(v => v + 1);\n    }\n  };\n  // Measure the container size, and return the size if it has changed.\n  const measureContainerSize = () => {\n    const element = containerRef.current;\n    if (!element) return null;\n    const {\n      offsetWidth,\n      offsetHeight\n    } = element;\n    const currentSize = containerSizeRef.current;\n    if (offsetWidth !== currentSize.width || offsetHeight !== currentSize.height) {\n      containerSizeRef.current = {\n        width: offsetWidth,\n        height: offsetHeight\n      };\n      return containerSizeRef.current;\n    }\n    return null;\n  };\n  const updateAndSnapToPage = (newPage, mount = false) => {\n    const newBoundedCurrentPage = getBoundedCurrentPage(newPage, pageCount);\n    const boundedCurrentPageDidChange = newBoundedCurrentPage !== propsBoundedCurrentPageRef.current;\n    if (boundedCurrentPageDidChange) {\n      propsBoundedCurrentPageRef.current = newBoundedCurrentPage;\n      updateCurrentPage(newBoundedCurrentPage, currentContentPageRef, !mount ? onChangePage : undefined);\n    }\n    // Finally, even if the current page did not change, the offset may\n    // have. Snap the current page to the latest offset.\n    const offset = offsetForPage(newBoundedCurrentPage, pageCount, pageRectsRef, isHorizontal, maxOffsetRef);\n    const animated = animateCurrentPageUpdate && RenderTarget.current() !== RenderTarget.canvas && !mount;\n    snapToPage(newBoundedCurrentPage, offset, {\n      animated\n    });\n  };\n  // Handle setting up MotionValue handlers, performing initial measurements,\n  // and setting the initial dragConstraints on mount. Finally snap to the\n  // current page without an animation. Mount does not trigger motion's\n  // onLayoutMeasure handler.\n  useIsomorphicLayoutEffect(() => {\n    if (hasMountedRef.current) return;\n    /**\n     * Defer the measurement of drag constraints until the next animation frame.\n     * When the preview is closed and reopened, it's switched from display: none\n     * to display: block. When an element is the child of display: none its measurements\n     * return `0`. When this layout effect fires, the preview iframe *is* set to\n     * display: block but in a twist of browser render scheduling this hasn't yet\n     * affected the iframe contents. So by deferring to the following animation frame\n     * we allow the iframe contents to take on dimension again.\n     * Fixes: https://github.com/framer/company/issues/23200\n     */\n    requestAnimationFrame(() => {\n      // If the Page has been mounted with a non-default current page, update\n      // the ref on mount so that the useEffect that watches changes to the\n      // currentPage prop doesn't fire incorrectly on subsequent renders.\n      currentContentPageRef.current = currentPage;\n      const contentOffset = contentOffsetRef.current;\n      contentOffset.x.on(\"change\", applyEffects);\n      contentOffset.y.on(\"change\", applyEffects);\n      applyEffects();\n      hasMountedRef.current = true;\n      const containerSize = measureContainerSize() ?? containerSizeRef.current;\n      updateMaxOffsetFromPageContents(containerSize);\n      updateAndSnapToPage(currentContentPageRef.current, true);\n    });\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n  // Handle user update to the currentPage from React props. This runs after\n  // onLayoutMeasure, so the current offsets will already be set based on any\n  // updates to the children or container sizes. Must only fire when\n  // currentPage changes.\n  React.useEffect(() => {\n    if (currentPage !== currentContentPageRef.current) updateAndSnapToPage(currentPage);\n  }, [currentPage]); // eslint-disable-line react-hooks/exhaustive-deps\n  // Measure the container size, and measure the children sizes when motion\n  // flags that it's performing a measure with any transforms removed.\n  const handleMeasureLifecycle = () => {\n    // Measure the container, update the ref, and return the Size if it has changed.\n    const newContainerSize = measureContainerSize();\n    // Get the rects of each PageContainer, and calculate and update drag\n    // constraints based on the current container size.\n    updateMaxOffsetFromPageContents(newContainerSize ?? containerSizeRef.current);\n    // Calculate if the Page's offset transform needs to be updated\n    // to either keep the current page centered, or snap to a new page.\n    updateAndSnapToPage(currentContentPageRef.current);\n    // Finally, if the measured size or direction has changed, ensure that the offset for the\n    // opposite direction is reset to 0. E.g. if the direction is\n    // horizontal, reset the vertical scroll to 0.\n    if (newContainerSize || direction !== lastDirectionRef.current) {\n      if (direction === \"horizontal\") {\n        contentOffsetRef.current.y.set(0);\n      } else {\n        contentOffsetRef.current.x.set(0);\n      }\n      lastDirectionRef.current = direction;\n    }\n  };\n  // Motion's onLayoutMeasure is not called on the canvas, so if we are on\n  // the canvas, we trigger the same callback we pass to onLayoutMeasure here\n  // in a useLayoutEffect. This is fine because we don't have to worry about\n  // un-setting parent transforms for measurements on the canvas.\n  useIsomorphicLayoutEffect(() => {\n    if (RenderTarget.current() !== RenderTarget.canvas) return;\n    handleMeasureLifecycle();\n  });\n  const onDragStartHandler = (event, info) => {\n    if (onScrollStart) onScrollStart(info);\n    if (onDragStart) onDragStart(event, info);\n    prev.x = initial.x = info.point.x;\n    prev.y = initial.y = info.point.y;\n  };\n  const onDragHandler = (event, info) => {\n    if (onScroll) onScroll(info);\n    if (onDrag) onDrag(event, info);\n    prev.x = info.point.x;\n    prev.y = info.point.y;\n  };\n  const onDragTransitionEnd = () => {\n    if (props.onDragTransitionEnd) props.onDragTransitionEnd();\n    if (onScrollEnd) {\n      const {\n        x,\n        y\n      } = contentOffsetRef.current;\n      const point = {\n        x: x.get(),\n        y: y.get()\n      };\n      onScrollEnd({\n        point,\n        velocity: {\n          x: x.getVelocity(),\n          y: y.getVelocity()\n        },\n        offset: {\n          x: point.x - initial.x,\n          y: point.y - initial.y\n        },\n        delta: {\n          x: point.x - prev.x,\n          y: point.y - prev.y\n        }\n      });\n    }\n  };\n  const onDragEndHandler = async (event, info) => {\n    const contentOffset = isHorizontal ? contentOffsetRef.current.x : contentOffsetRef.current.y;\n    contentOffset.stop();\n    const startPosition = contentOffset.get();\n    const axis = isHorizontal ? \"x\" : \"y\";\n    const velocity = info.velocity[axis];\n    let index = nearestPageIndex(pageRectsRef.current, startPosition, startPosition, isHorizontal, momentum);\n    if (velocity) {\n      /**\n       * TODO: This is a bit hacky. We're hijacking the inertia animation for the modifyTarget functionality. Maybe this is information we can\n       * pass through the `onDragEnd` event handler if `dragMomentum` is `true`.\n       */\n      animateValue({\n        type: \"inertia\",\n        keyframes: [startPosition],\n        velocity,\n        modifyTarget: endPosition => {\n          index = nearestPageIndex(pageRectsRef.current, startPosition, endPosition, isHorizontal, momentum);\n          return endPosition;\n        }\n      }).stop();\n    }\n    updateCurrentPage(index, currentContentPageRef, onChangePage);\n    const offset = offsetForPage(index, pageCount, pageRectsRef, isHorizontal, maxOffsetRef);\n    if (onDragEnd) onDragEnd(event, info);\n    const handler = contentOffsetRef.current[axis];\n    handler.set(startPosition);\n    animate(handler, offset, {\n      type: \"spring\",\n      velocity,\n      stiffness: 500,\n      damping: 50,\n      onComplete: onDragTransitionEnd\n    });\n  };\n  pageEffectValuesRef.current = [];\n  const childComponents = React.Children.map(children, (child, index) => {\n    if (!isReactChild(child) || !isReactElement(child)) {\n      return child;\n    }\n    const update = {\n      right: undefined,\n      bottom: undefined,\n      top: undefined,\n      left: undefined,\n      _constraints: {\n        enabled: false\n      }\n    };\n    if (containerProps.__fromCanvasComponent) {\n      update.style = child.props.style ?? {};\n      if (contentWidth === \"stretch\") update.style.width = \"100%\";\n      if (contentHeight === \"stretch\") update.style.height = \"100%\";\n    } else {\n      if (contentWidth === \"stretch\") update.width = \"100%\";\n      if (contentHeight === \"stretch\") update.height = \"100%\";\n    }\n    let effectDictionary;\n    const values = effectValues(index, latestPropsRef, pageRectsRef, contentOffsetRef, maxOffsetRef);\n    if (values) {\n      // We use motion values so we can set them in the onMove function\n      effectDictionary = {};\n      for (const key in values) {\n        effectDictionary[key] = motionValue(values[key]);\n      }\n    }\n    pageEffectValuesRef.current.push(effectDictionary);\n    return React.createElement(PageContainer, {\n      key: index,\n      effect: effectDictionary,\n      dragEnabled: dragEnabled,\n      direction: direction,\n      contentHeight: contentHeight,\n      contentWidth: contentWidth,\n      alignment: alignment,\n      gap: gap,\n      isLastPage: index === pageCount - 1,\n      contentOffsetRef: contentOffsetRef,\n      constraintsRef: constraints,\n      directionLock: directionLock,\n      onDragStart: onDragStartHandler,\n      onDrag: onDragHandler,\n      onDragEnd: onDragEndHandler,\n      layoutId: layoutId ? `${layoutId}-${index}` : undefined\n    }, React.cloneElement(child, update));\n  });\n  useWheelScroll(scrollableRef, {\n    enabled: wheelEnabled,\n    initial,\n    prev,\n    direction,\n    constraints,\n    offsetX: contentOffsetRef.current.x,\n    offsetY: contentOffsetRef.current.y,\n    onScrollStart,\n    onScroll,\n    onScrollEnd\n  });\n  return React.createElement(FrameWithMotion, {\n    \"data-framer-component-type\": \"PageWrapper\",\n    preserve3d: false,\n    perspective: hasEffect(props) ? 1200 : undefined,\n    ...containerProps,\n    // Overflow is managed via a property control.\n    style: {\n      pointerEvents: undefined,\n      ...containerProps.style,\n      overflow: overflow\n    },\n    layoutId: layoutId,\n    ref: containerRef,\n    onLayoutMeasure: handleMeasureLifecycle\n  }, React.createElement(FrameWithMotion, {\n    \"data-framer-component-type\": \"Page\",\n    ref: scrollableRef,\n    background: null,\n    x: contentOffsetRef.current.x,\n    y: contentOffsetRef.current.y,\n    width: \"100%\",\n    height: \"100%\",\n    preserve3d: true,\n    layout: true,\n    layoutId: layoutId !== undefined ? layoutId + \"-page\" : undefined,\n    style: {\n      padding: makePaddingString(paddingFromProps(props)),\n      display: \"flex\",\n      flexDirection: isHorizontal ? \"row\" : \"column\",\n      pointerEvents: props.style?.pointerEvents\n    }\n  }, React.createElement(EmptyState, {\n    title: \"Page\",\n    description: \"Click and drag the connector to any frame on the canvas \\u2192\",\n    children: children,\n    size: containerSizeRef.current,\n    insideUserCodeComponent: !__fromCodeComponentNode\n  }), childComponents));\n});\n// Effects\nfunction cubeEffect(info) {\n  const {\n    normalizedOffset,\n    direction\n  } = info;\n  const isHorizontal = direction === \"horizontal\";\n  return {\n    originX: normalizedOffset < 0 ? 1 : 0,\n    originY: normalizedOffset < 0 ? 1 : 0,\n    rotateY: isHorizontal ? Math.min(Math.max(-90, normalizedOffset * 90), 90) : 0,\n    rotateX: isHorizontal ? 0 : Math.min(Math.max(-90, normalizedOffset * -90), 90),\n    backfaceVisibility: \"hidden\",\n    WebkitBackfaceVisibility: \"hidden\"\n  };\n}\nfunction coverflowEffect(info) {\n  const {\n    normalizedOffset,\n    direction,\n    size\n  } = info;\n  const isHorizontal = direction === \"horizontal\";\n  return {\n    rotateY: isHorizontal ? Math.min(45, Math.max(-45, normalizedOffset * -45)) : 0,\n    rotateX: isHorizontal ? 0 : Math.min(45, Math.max(-45, normalizedOffset * 45)),\n    originX: isHorizontal ? normalizedOffset < 0 ? 0 : 1 : 0.5,\n    originY: isHorizontal ? 0.5 : normalizedOffset < 0 ? 0 : 1,\n    x: isHorizontal ? `${normalizedOffset * -25}%` : 0,\n    y: isHorizontal ? 0 : `${normalizedOffset * -25}%`,\n    z: -Math.abs(normalizedOffset),\n    scale: 1 - Math.abs(normalizedOffset / 10)\n  };\n}\nfunction calcPileAxisOffset(offset, length) {\n  return offset * length - offset * 8;\n}\nfunction pileEffect(info) {\n  const {\n    normalizedOffset,\n    direction,\n    size\n  } = info;\n  const isHorizontal = direction === \"horizontal\";\n  const absoluteOffset = Math.abs(normalizedOffset);\n  return {\n    x: normalizedOffset < 0 && isHorizontal ? calcPileAxisOffset(absoluteOffset, size.width) : 0,\n    y: normalizedOffset < 0 && !isHorizontal ? calcPileAxisOffset(absoluteOffset, size.height) : 0,\n    scale: normalizedOffset < 0 ? 1 - absoluteOffset / 50 : 1\n  };\n}\nfunction wheelEffect(info) {\n  const {\n    normalizedOffset,\n    direction,\n    size\n  } = info;\n  const isHorizontal = direction === \"horizontal\";\n  const originZ = (isHorizontal ? size.width : size.height) * 18 / (2 * Math.PI);\n  const rotateX = isHorizontal ? 0 : normalizedOffset * -20;\n  const rotateY = isHorizontal ? normalizedOffset * 20 : 0;\n  const y = isHorizontal ? 0 : normalizedOffset * -size.height;\n  const x = isHorizontal ? normalizedOffset * -size.width : 0;\n  return {\n    opacity: 1 - Math.abs(normalizedOffset) / 4,\n    transform: `translate(${x}px, ${y}px) translateZ(-${originZ}px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) translateZ(${originZ}px)`\n  };\n}\nfunction getDefaultEffect(type) {\n  switch (type) {\n    case \"cube\":\n      return cubeEffect;\n    case \"coverflow\":\n      return coverflowEffect;\n    case \"pile\":\n      return pileEffect;\n    case \"wheel\":\n      return wheelEffect;\n    default:\n      return null;\n  }\n}\nfunction nearestPageIndex(pageRects, startPosition, endPosition, isHorizontalDirection, allowSkippingPages) {\n  const distanceToStart = function (rect) {\n    const rectPosition = isHorizontalDirection ? rect.x : rect.y;\n    return Math.abs(rectPosition + startPosition);\n  };\n  const distanceToEnd = function (rect) {\n    const rectPosition = isHorizontalDirection ? rect.x : rect.y;\n    return Math.abs(rectPosition + endPosition);\n  };\n  if (allowSkippingPages) {\n    const closestPages = [...pageRects].sort((a, b) => distanceToEnd(a) - distanceToEnd(b));\n    if (!closestPages[0]) return -1;\n    return pageRects.indexOf(closestPages[0]);\n  } else {\n    const closestToStart = [...pageRects].sort((a, b) => distanceToStart(a) - distanceToStart(b));\n    if (closestToStart.length === 1 && closestToStart[0]) return pageRects.indexOf(closestToStart[0]);\n    const pageA = closestToStart[0];\n    const pageB = closestToStart[1];\n    if (!pageA || !pageB) return -1;\n    const closestPages = [pageA, pageB].sort((a, b) => distanceToEnd(a) - distanceToEnd(b));\n    if (!closestPages[0]) return -1;\n    return pageRects.indexOf(closestPages[0]);\n  }\n}\nfunction getPageContentRects(containerRef, containerSize, direction, gap) {\n  const containerElement = containerRef.current;\n  if (!containerElement) return;\n  const contentWrappers = [];\n  containerElement.firstChild?.childNodes.forEach(node => {\n    const childNode = node.firstChild;\n    if (!(childNode instanceof HTMLElement)) return;\n    const componentType = childNode.getAttribute(\"data-framer-component-type\");\n    if (componentType === pageContentWrapperType) {\n      contentWrappers.push(childNode);\n    }\n  });\n  const sizes = [];\n  contentWrappers.forEach(contentWrapper => {\n    if (contentWrapper instanceof HTMLElement && contentWrapper.firstChild instanceof HTMLElement) {\n      let width = contentWrapper.firstChild.offsetWidth;\n      let height = contentWrapper.firstChild.offsetHeight;\n      if (process.env.NODE_ENV === \"test\") {\n        width = 100;\n        height = 100;\n      }\n      sizes.push({\n        width,\n        height\n      });\n    } else {\n      sizes.push(null);\n    }\n  });\n  let maxX = 0;\n  let maxY = 0;\n  const isHorizontal = direction === \"horizontal\";\n  return sizes.map(queriedSize => {\n    const size = queriedSize || containerSize;\n    const x = maxX;\n    const y = maxY;\n    if (isHorizontal) {\n      maxX += size.width + gap;\n    } else {\n      maxY += size.height + gap;\n    }\n    return {\n      ...size,\n      x,\n      y\n    };\n  });\n}\nfunction getMaxOffset(containerSize, pageContentRects, direction, paddingProps) {\n  const lastPageRect = pageContentRects[pageContentRects.length - 1];\n  if (!lastPageRect) return 0;\n  const paddingSides = paddingFromProps(paddingProps);\n  const isHorizontal = direction === \"horizontal\";\n  const paddingStart = isHorizontal ? paddingSides.left : paddingSides.top;\n  const paddingEnd = isHorizontal ? paddingSides.right : paddingSides.bottom;\n  const pageWidth = isHorizontal ? lastPageRect.width : lastPageRect.height;\n  const containerWidth = isHorizontal ? containerSize.width : containerSize.height;\n  const freeSpace = containerWidth - paddingStart - paddingEnd - pageWidth;\n  const target = isHorizontal ? lastPageRect.x : lastPageRect.y;\n  // Scroll offset can't be negative, if it is accidentally negative, it will incorrectly offset the page contents from the starting point.\n  if (freeSpace <= 0) return Math.max(target, 0);\n  return Math.max(target - freeSpace, 0);\n}\nfunction offsetForPage(index, pageCount, pageRectsRef, isHorizontal, maxOffsetRef) {\n  const pageIndex = Math.max(0, Math.min(pageCount - 1, index));\n  const currentPageRect = pageRectsRef.current[pageIndex];\n  if (!currentPageRect) {\n    return 0;\n  }\n  if (isHorizontal) {\n    return -Math.min(currentPageRect.x, maxOffsetRef.current);\n  } else {\n    return -Math.min(currentPageRect.y, maxOffsetRef.current);\n  }\n}\nfunction useSnapToPage(currentContentPageRef, contentOffsetRef, isHorizontal) {\n  return (pageIndex, offset, options) => {\n    currentContentPageRef.current = pageIndex;\n    const contentOffset = isHorizontal ? contentOffsetRef.current.x : contentOffsetRef.current.y;\n    if (!options || !options.animated) {\n      contentOffset.set(offset);\n      return;\n    } // else\n    const axis = isHorizontal ? \"x\" : \"y\";\n    const value = contentOffsetRef.current[axis];\n    value.set(contentOffset.get());\n    animate(value, offset, {\n      type: \"spring\",\n      velocity: contentOffset.getVelocity(),\n      stiffness: 500,\n      damping: 50\n    });\n  };\n}\n// The current page property is capped to the number of children when positive, and cycles from last when negative\nfunction getBoundedCurrentPage(pageIndex, pageCount) {\n  return pageIndex >= 0 ? Math.min(pageIndex, pageCount - 1) : (pageIndex % pageCount + pageCount) % pageCount;\n}\nfunction effectValues(index, latestPropsRef, pageRectsRef, contentOffsetRef, maxOffsetRef) {\n  const {\n    direction: latestDirection = \"horizontal\",\n    defaultEffect: latestDefaultEffect,\n    effect: latestEffect,\n    gap: latestGap = 10\n  } = latestPropsRef.current;\n  const latestIsHorizontal = latestDirection === \"horizontal\";\n  const pageRect = pageRectsRef.current[index] || {\n    x: latestIsHorizontal ? index * 200 + latestGap : 0,\n    y: latestIsHorizontal ? 0 : index * 200 + latestGap,\n    width: 200,\n    height: 200\n  };\n  const effectFunction = latestEffect || getDefaultEffect(latestDefaultEffect);\n  if (!effectFunction) return null;\n  let offset;\n  let normalizedOffset;\n  const contentOffset = contentOffsetRef.current;\n  const maxScrollOffset = maxOffsetRef.current;\n  if (latestIsHorizontal) {\n    offset = Math.min(pageRect.x, maxScrollOffset) + (contentOffset ? contentOffset.x.get() : 0);\n    normalizedOffset = offset / (pageRect.width + latestGap);\n  } else {\n    offset = Math.min(pageRect.y, maxScrollOffset) + (contentOffset ? contentOffset.y.get() : 0);\n    normalizedOffset = offset / (pageRect.height + latestGap);\n  }\n  const size = {\n    width: pageRect.width,\n    height: pageRect.height\n  };\n  return effectFunction({\n    offset,\n    normalizedOffset,\n    size,\n    index,\n    direction: latestDirection,\n    gap: latestGap,\n    pageCount: pageRectsRef.current.length\n  });\n}\nfunction hasEffect(props) {\n  return !!props.effect || !!getDefaultEffect(props.defaultEffect);\n}\nfunction updateCurrentPage(newPageIndex, currentContentPageRef, onChangePage) {\n  if (currentContentPageRef.current === newPageIndex) return;\n  if (onChangePage) onChangePage(newPageIndex, currentContentPageRef.current);\n  currentContentPageRef.current = newPageIndex;\n}","map":{"version":3,"names":["animate","animateValue","motionValue","useMotionValue","process","React","FrameWithMotion","RenderTarget","injectComponentCSSRules","isFiniteNumber","isMotionValue","useLayoutId","useIsomorphicLayoutEffect","isReactChild","isReactElement","warnOnce","EmptyState","useWheelScroll","makePaddingString","paddingFromProps","PageContainer","pageContentWrapperType","Page","forwardRef","props","forwardedRef","direction","contentWidth","contentHeight","alignment","currentPage","animateCurrentPageUpdate","gap","gapValue","padding","momentum","dragEnabled","defaultEffect","background","overflow","__fromCodeComponentNode","effect","children","contentOffsetX","contentOffsetY","onChangePage","onScrollStart","onScroll","onDragStart","onDrag","onDragEnd","directionLock","onScrollEnd","onDirectionLock","onUpdate","wheelEnabled","layoutId","specificLayoutId","rest","postfix","containerProps","hasMountedRef","useRef","hasFixedSize","hasRestrictions","width","height","__fromCanvasComponent","_constraints","enabled","initial","prev","x","y","current","isHorizontal","pageCount","Children","count","maxOffsetRef","constraints","top","left","right","bottom","fallbackContainerRef","containerRef","scrollableRef","pageEffectValuesRef","pageRectsRef","internalX","internalY","contentOffsetRef","currentContentPageRef","propsBoundedCurrentPageRef","latestPropsRef","lastDirectionRef","snapToPage","useSnapToPage","_","setForceUpdateCount","useState","containerSizeRef","updateOnResize","useCallback","v","useEffect","preview","globalThis","addEventListener","removeEventListener","applyEffects","forEach","effectDictionary","index","values","effectValues","key","value","Object","entries","effectValue","set","updateMaxOffsetFromPageContents","containerSize","newPageContentRects","getPageContentRects","newMaxOffset","getMaxOffset","canvas","measureContainerSize","element","offsetWidth","offsetHeight","currentSize","updateAndSnapToPage","newPage","mount","newBoundedCurrentPage","getBoundedCurrentPage","boundedCurrentPageDidChange","updateCurrentPage","undefined","offset","offsetForPage","animated","requestAnimationFrame","contentOffset","on","handleMeasureLifecycle","newContainerSize","onDragStartHandler","event","info","point","onDragHandler","onDragTransitionEnd","get","velocity","getVelocity","delta","onDragEndHandler","stop","startPosition","axis","nearestPageIndex","type","keyframes","modifyTarget","endPosition","handler","stiffness","damping","onComplete","childComponents","map","child","update","style","push","createElement","isLastPage","constraintsRef","cloneElement","offsetX","offsetY","preserve3d","perspective","hasEffect","pointerEvents","ref","onLayoutMeasure","layout","display","flexDirection","title","description","size","insideUserCodeComponent","cubeEffect","normalizedOffset","originX","originY","rotateY","Math","min","max","rotateX","backfaceVisibility","WebkitBackfaceVisibility","coverflowEffect","z","abs","scale","calcPileAxisOffset","length","pileEffect","absoluteOffset","wheelEffect","originZ","PI","opacity","transform","getDefaultEffect","pageRects","isHorizontalDirection","allowSkippingPages","distanceToStart","rect","rectPosition","distanceToEnd","closestPages","sort","a","b","indexOf","closestToStart","pageA","pageB","containerElement","contentWrappers","firstChild","childNodes","node","childNode","HTMLElement","componentType","getAttribute","sizes","contentWrapper","env","NODE_ENV","maxX","maxY","queriedSize","pageContentRects","paddingProps","lastPageRect","paddingSides","paddingStart","paddingEnd","pageWidth","containerWidth","freeSpace","target","pageIndex","currentPageRect","options","latestDirection","latestDefaultEffect","latestEffect","latestGap","latestIsHorizontal","pageRect","effectFunction","maxScrollOffset","newPageIndex"],"sources":["../../../src/components/Page/EmulatedPage.tsx"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}