{"ast":null,"code":"import { Animatable } from \"../../animation/Animatable/Animatable.js\";\nimport { BackgroundImage } from \"../types/BackgroundImage.js\";\n/** @internal */\nexport function imagePatternPropsForFill(fill, frame, id) {\n  fill = Animatable.get(fill, \"#09F\");\n  if (!BackgroundImage.isImageObject(fill)) return undefined;\n  if (!fill.pixelWidth || !fill.pixelHeight) return undefined;\n  const imageWidth = fill.pixelWidth;\n  const imageHeight = fill.pixelHeight;\n  let transform;\n  const {\n    fit\n  } = fill;\n  if (fit === \"fill\" || fit === \"fit\" || !fit) {\n    let scaleX = 1;\n    let scaleY = 1;\n    let offsetX = 0;\n    let offsetY = 0;\n    const imageRatio = imageWidth / imageHeight;\n    const realWidth = frame.height * imageRatio;\n    const realHeight = frame.width / imageRatio;\n    const validScaleX = realWidth / frame.width;\n    const validScaleY = realHeight / frame.height;\n    if (fit === \"fill\" || !fit ? validScaleY > validScaleX : validScaleY < validScaleX) {\n      scaleY = validScaleY;\n      offsetY = (1 - validScaleY) / 2;\n    } else {\n      scaleX = validScaleX;\n      offsetX = (1 - validScaleX) / 2;\n    }\n    transform = `translate(${offsetX}, ${offsetY}) scale(${scaleX}, ${scaleY})`;\n  }\n  const imageId = `id${id}g${\"-fillImage\"}`;\n  return {\n    id: imageId,\n    path: fill.src ?? \"\",\n    transform\n  };\n}","map":{"version":3,"names":["Animatable","BackgroundImage","imagePatternPropsForFill","fill","frame","id","get","isImageObject","undefined","pixelWidth","pixelHeight","imageWidth","imageHeight","transform","fit","scaleX","scaleY","offsetX","offsetY","imageRatio","realWidth","height","realHeight","width","validScaleX","validScaleY","imageId","path","src"],"sources":["../../../src/render/utils/imagePatternPropsForFill.tsx"],"sourcesContent":[null],"mappings":"AAIA,SAASA,UAAU,QAAQ,0CAA0C;AACrE,SAASC,eAAe,QAAQ,6BAA6B;AAE7D;AACA,OAAM,SAAUC,wBAAwBA,CACpCC,IAAyC,EACzCC,KAAW,EACXC,EAAU;EAEVF,IAAI,GAAGH,UAAU,CAACM,GAAG,CAACH,IAAI,EAAE,MAAM,CAAC;EAEnC,IAAI,CAACF,eAAe,CAACM,aAAa,CAACJ,IAAI,CAAC,EAAE,OAAOK,SAAS;EAC1D,IAAI,CAACL,IAAI,CAACM,UAAU,IAAI,CAACN,IAAI,CAACO,WAAW,EAAE,OAAOF,SAAS;EAE3D,MAAMG,UAAU,GAAGR,IAAI,CAACM,UAAU;EAClC,MAAMG,WAAW,GAAGT,IAAI,CAACO,WAAW;EAEpC,IAAIG,SAA6B;EACjC,MAAM;IAAEC;EAAG,CAAE,GAAGX,IAAI;EAEpB,IAAIW,GAAG,KAAK,MAAM,IAAIA,GAAG,KAAK,KAAK,IAAI,CAACA,GAAG,EAAE;IACzC,IAAIC,MAAM,GAAG,CAAC;IACd,IAAIC,MAAM,GAAG,CAAC;IACd,IAAIC,OAAO,GAAG,CAAC;IACf,IAAIC,OAAO,GAAG,CAAC;IAEf,MAAMC,UAAU,GAAGR,UAAU,GAAGC,WAAW;IAC3C,MAAMQ,SAAS,GAAGhB,KAAK,CAACiB,MAAM,GAAGF,UAAU;IAC3C,MAAMG,UAAU,GAAGlB,KAAK,CAACmB,KAAK,GAAGJ,UAAU;IAC3C,MAAMK,WAAW,GAAGJ,SAAS,GAAGhB,KAAK,CAACmB,KAAK;IAC3C,MAAME,WAAW,GAAGH,UAAU,GAAGlB,KAAK,CAACiB,MAAM;IAE7C,IAAIP,GAAG,KAAK,MAAM,IAAI,CAACA,GAAG,GAAGW,WAAW,GAAGD,WAAW,GAAGC,WAAW,GAAGD,WAAW,EAAE;MAChFR,MAAM,GAAGS,WAAW;MACpBP,OAAO,GAAG,CAAC,CAAC,GAAGO,WAAW,IAAI,CAAC;KAClC,MAAM;MACHV,MAAM,GAAGS,WAAW;MACpBP,OAAO,GAAG,CAAC,CAAC,GAAGO,WAAW,IAAI,CAAC;;IAGnCX,SAAS,GAAG,aAAaI,OAAO,KAAKC,OAAO,WAAWH,MAAM,KAAKC,MAAM,GAAG;;EAG/E,MAAMU,OAAO,GAAG,KAAKrB,EAAE,IAAI,YAAY,EAAE;EACzC,OAAO;IAAEA,EAAE,EAAEqB,OAAO;IAAEC,IAAI,EAAExB,IAAI,CAACyB,GAAG,IAAI,EAAE;IAAEf;EAAS,CAAE;AAC3D","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}