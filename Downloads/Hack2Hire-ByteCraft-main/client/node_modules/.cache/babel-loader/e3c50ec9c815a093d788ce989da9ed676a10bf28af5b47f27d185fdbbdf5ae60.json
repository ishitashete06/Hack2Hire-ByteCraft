{"ast":null,"code":"import { motion } from \"framer-motion\";\nimport * as React from \"react\";\nimport { useRef } from \"react\";\nimport { Animatable } from \"../../animation/Animatable/Animatable.js\";\nimport { cx } from \"../../modules/cx.js\";\nimport { navigateFromAttributes } from \"../../modules/framerPageLink.js\";\nimport { AnchorLinkTarget, useImplicitPathVariables } from \"../../modules/Link.js\";\nimport { replaceFramerPageLinks } from \"../../modules/replaceFramerPageLinks.js\";\nimport { useIsOnFramerCanvas } from \"../../modules/useIsOnFramerCanvas.js\";\nimport { useCurrentRoute, useRoutePreloader, useRouter } from \"../../router/index.js\";\nimport { fontStore, LoadFontResult } from \"../fonts/fontStore.js\";\nimport { collectTextShadowsForProps } from \"../style/shadow.js\";\nimport { calculateRect, ParentSizeState, useParentSize } from \"../types/NewConstraints.js\";\nimport { RenderTarget } from \"../types/RenderEnvironment.js\";\nimport { collectFiltersFromProps } from \"../utils/filtersForNode.js\";\nimport { findAnchorElement } from \"../utils/findAnchorElement.js\";\nimport { injectComponentCSSRules } from \"../utils/injectComponentCSSRules.js\";\nimport { isShallowEqualArray } from \"../utils/isShallowEqualArray.js\";\nimport { forceLayerBackingWithCSSProperties } from \"../utils/setLayerBacked.js\";\nimport { transformTemplate } from \"../utils/transformTemplate.js\";\nimport { useLayoutId } from \"../utils/useLayoutId.js\";\nimport { measureClosestComponentContainer, useMeasureLayout } from \"../utils/useMeasureLayout.js\";\nimport { ComponentContainerContext } from \"./ComponentContainerContext.js\";\n/** Used to map characters to HTML entities. */\nconst htmlEscapes = {\n  \"&\": \"&amp;\",\n  \"<\": \"&lt;\",\n  \">\": \"&gt;\",\n  '\"': \"&quot;\",\n  \"'\": \"&#39;\"\n};\n/** Used to match HTML entities and HTML characters. */\nconst reUnescapedHtml = /[&<>\"']/g;\nconst reHasUnescapedHtml = RegExp(reUnescapedHtml.source);\n/**\n * Escape function, taken from Lodash\n * @see https://github.com/lodash/lodash/blob/e0029485ab4d97adea0cb34292afb6700309cf16/escape.js#L41\n * */\nfunction escapeHTML(str) {\n  return str && reHasUnescapedHtml.test(str) ? str.replace(reUnescapedHtml, chr => htmlEscapes[chr]) : str || \"\";\n}\n/**\n * @internal\n * Don't change these values as they are used in generated components as well.\n */\nexport const deprecatedRichTextPlaceholder = \"{{ text-placeholder }}\";\nexport const richTextWrapperClassName = \"rich-text-wrapper\";\n/** @internal @deprecated */\nexport const DeprecatedRichText = /* @__PURE__ */React.forwardRef(function Text(props, forwardedRef) {\n  const {\n    id,\n    name,\n    html,\n    htmlFromDesign,\n    text,\n    textFromDesign,\n    fonts = [],\n    width,\n    height,\n    left,\n    right,\n    top,\n    bottom,\n    center,\n    className,\n    stylesPresetsClassName,\n    visible = true,\n    opacity,\n    rotation = 0,\n    verticalAlignment = \"top\",\n    isEditable = false,\n    willChangeTransform,\n    environment = RenderTarget.current,\n    withExternalLayout = false,\n    positionSticky,\n    positionStickyTop,\n    positionStickyRight,\n    positionStickyBottom,\n    positionStickyLeft,\n    __htmlStructure,\n    __fromCanvasComponent = false,\n    _forwardedOverrideId,\n    _forwardedOverrides,\n    _usesDOMRect,\n    children,\n    ...rest\n  } = props;\n  const parentSize = useParentSize();\n  const layoutId = useLayoutId(props);\n  const fallbackLayoutRef = useRef(null);\n  const layoutRef = forwardedRef ?? fallbackLayoutRef;\n  const {\n    navigate,\n    getRoute\n  } = useRouter();\n  const currentRoute = useCurrentRoute();\n  useRoutePreloader(props.preload ?? []);\n  useMeasureLayout(props, layoutRef);\n  const inCodeComponent = React.useContext(ComponentContainerContext);\n  const isOnCanvas = useIsOnFramerCanvas();\n  // Replace HTML with text override or variable\n  let textOrOverride = text;\n  const forwardedOverrideId = _forwardedOverrideId ?? id;\n  if (forwardedOverrideId && _forwardedOverrides) {\n    const override = _forwardedOverrides[forwardedOverrideId];\n    if (typeof override === \"string\") {\n      textOrOverride = override;\n    }\n  }\n  // The __htmlStructure placeholder is inserted in:\n  // - collectVariantDefinitionForNode.ts\n  // - RichTextNode.getProps\n  // - RichTextNode.getAttributes\n  let innerHTML = \"\";\n  if (textOrOverride) {\n    const escapedText = escapeHTML(textOrOverride);\n    innerHTML = __htmlStructure ? __htmlStructure.replace(deprecatedRichTextPlaceholder, escapedText) : `<p>${escapedText}</p>`;\n  } else if (html) {\n    innerHTML = html;\n  } else if (textFromDesign) {\n    const escapedText = escapeHTML(textFromDesign);\n    innerHTML = __htmlStructure ? __htmlStructure.replace(deprecatedRichTextPlaceholder, escapedText) : `<p>${escapedText}</p>`;\n  } else if (htmlFromDesign) {\n    innerHTML = htmlFromDesign;\n  }\n  // Parse the ProseMirror HTML to replace framer page links in the `data:framer/page-link,`\n  // format with the correct paths their target corresponds to.\n  // This needs to happen whenever the HTML string changes, since smart\n  // components can update the ProseMirror HTML in variants by updating this prop value.\n  const implicitPathVariables = useImplicitPathVariables();\n  const innerHTMLWithReplacedFramerPageLinks = React.useMemo(() => {\n    if (isOnCanvas || !getRoute || !currentRoute) return innerHTML;\n    return replaceFramerPageLinks(innerHTML, getRoute, currentRoute, implicitPathVariables);\n  }, [isOnCanvas, innerHTML, getRoute, currentRoute, implicitPathVariables]);\n  React.useEffect(() => {\n    const container = layoutRef.current;\n    if (container === null) return;\n    function interceptPageLinks(event) {\n      const anchorElement = findAnchorElement(event.target, layoutRef.current);\n      // Don't prevent cmd + click, allowing users to open in new tab.\n      if (event.metaKey || !navigate || !anchorElement || anchorElement.getAttribute(\"target\") === AnchorLinkTarget._blank) return;\n      // Page links written to the ProseMirror HTML in the `data:framer/page-link,`\n      // format should have been parsed, and replaced with the correct paths.\n      // If that has happened, we can access the route id and transition properties\n      // as data attributes, finally performing a navigation.\n      const didNavigate = navigateFromAttributes(navigate, anchorElement, implicitPathVariables);\n      if (didNavigate) {\n        event.preventDefault();\n      }\n    }\n    // If this is ever changed, please also update the test in the router\n    // https://github.com/framer/FramerStudio/blob/d02564051eeb43e6a737f3301439d8efbc4167aa/src/router/src/Router.test.tsx#L89\n    container.addEventListener(\"click\", interceptPageLinks);\n    return () => {\n      container.removeEventListener(\"click\", interceptPageLinks);\n    };\n  }, [navigate, implicitPathVariables]);\n  useLoadFonts(fonts, __fromCanvasComponent, layoutRef);\n  // Hooks need to be above this line\n  if (!visible) return null;\n  injectComponentCSSRules();\n  const isHidden = isEditable && environment() === RenderTarget.canvas;\n  const style = {\n    outline: \"none\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    justifyContent: convertVerticalAlignment(verticalAlignment),\n    opacity: isHidden ? 0 : opacity,\n    flexShrink: 0\n  };\n  const restrictedRenderTarget = RenderTarget.hasRestrictions();\n  const frame = calculateRect(props, parentSize || ParentSizeState.Unknown, false);\n  const isAutoSized = _usesDOMRect && (width === \"auto\" || height === \"auto\");\n  const hasTransformTemplate = !!props.transformTemplate || !frame || !restrictedRenderTarget || __fromCanvasComponent || isAutoSized;\n  const template = hasTransformTemplate ? props.transformTemplate ?? transformTemplate(center) : undefined;\n  if (!withExternalLayout) {\n    if (frame && restrictedRenderTarget && !isAutoSized) {\n      const rotate = Animatable.getNumber(rotation).toFixed(4);\n      style.transform = `translate(${frame.x}px, ${frame.y}px) rotate(${rotate}deg)`;\n      style.width = frame.width;\n      style.minWidth = frame.width;\n      style.height = frame.height;\n    } else {\n      style.left = left;\n      style.right = right;\n      style.top = top;\n      style.bottom = bottom;\n      style.width = width;\n      style.height = height;\n      // I have no idea why this works as a number but not as a string. This is copied from the Text component.\n      style.rotate = rotation;\n    }\n    if (positionSticky) {\n      if (!isOnCanvas || inCodeComponent) {\n        style.position = \"sticky\";\n        style.willChange = \"transform\";\n        style.zIndex = 1;\n        style.top = positionStickyTop;\n        style.right = positionStickyRight;\n        style.bottom = positionStickyBottom;\n        style.left = positionStickyLeft;\n      }\n    } else if (isOnCanvas && (props.positionFixed || props.positionAbsolute)) {\n      style.position = \"absolute\";\n    }\n  }\n  collectFiltersFromProps(props, style);\n  collectTextShadowsForProps(props, style);\n  if (willChangeTransform) {\n    // We're not using Layer.applyWillChange here, because adding willChange:transform causes clipping issues in export\n    forceLayerBackingWithCSSProperties(style);\n  }\n  Object.assign(style, props.style);\n  return React.createElement(motion.div, {\n    id: id,\n    ref: layoutRef,\n    ...rest,\n    style: style,\n    layoutId: layoutId,\n    \"data-framer-name\": name,\n    \"data-framer-component-type\": \"DeprecatedRichText\",\n    \"data-center\": center,\n    className: cx(className, stylesPresetsClassName, richTextWrapperClassName),\n    transformTemplate: template,\n    dangerouslySetInnerHTML: {\n      __html: innerHTMLWithReplacedFramerPageLinks\n    }\n  });\n});\nexport function convertVerticalAlignment(verticalAlignment) {\n  switch (verticalAlignment) {\n    case \"top\":\n      return \"flex-start\";\n    case \"center\":\n      return \"center\";\n    case \"bottom\":\n      return \"flex-end\";\n  }\n}\nexport function useLoadFonts(fonts, fromCanvasComponent, containerRef) {\n  // The fonts array is typically regenerated for every change to a text node,\n  // so we need to keep track of previous values to avoid calls to the font\n  // store when the contents of the array are the same between renders\n  const prevFontsRef = useRef([]);\n  if (!isShallowEqualArray(prevFontsRef.current, fonts)) {\n    prevFontsRef.current = fonts;\n    fontStore.loadWebFontsFromSelectors(fonts).then(results => {\n      // After fonts load, layout is likely to shift in auto-sized\n      // elements. Since measurements would have typically already been\n      // taken at this point, this can lead to selection outlines\n      // appearing out of sync with the rendered component. On the canvas\n      // we hook into the font loading process and manually trigger a\n      // re-render for the node when it completes, which in turn makes\n      // sure that all layout measurements take the latest layout shifts\n      // into account. In compiled smart components, however, we can't use\n      // the same solution. We'll instead check if new fonts have been\n      // loaded, and attempt to add a measure request for the closest\n      // component container, which in the case of component instances is\n      // the only node whose measurements need updating (we don't track\n      // measurements for things rendered inside the component itself,\n      // which could also be affected by layout shifts).\n      // If we're not running on the canvas and from within a smart\n      // component, there's no need to measure.\n      if (!fromCanvasComponent || !containerRef.current || RenderTarget.current() !== RenderTarget.canvas) return;\n      // We only need to measure if at least one new font has been loaded.\n      // Otherwise we assume there was no layout shift.\n      const didLoadNewFonts = results.some(result => result.status === \"fulfilled\" && result.value === LoadFontResult.Loaded);\n      if (didLoadNewFonts) {\n        measureClosestComponentContainer(containerRef.current);\n      }\n    });\n  }\n}","map":{"version":3,"names":["motion","React","useRef","Animatable","cx","navigateFromAttributes","AnchorLinkTarget","useImplicitPathVariables","replaceFramerPageLinks","useIsOnFramerCanvas","useCurrentRoute","useRoutePreloader","useRouter","fontStore","LoadFontResult","collectTextShadowsForProps","calculateRect","ParentSizeState","useParentSize","RenderTarget","collectFiltersFromProps","findAnchorElement","injectComponentCSSRules","isShallowEqualArray","forceLayerBackingWithCSSProperties","transformTemplate","useLayoutId","measureClosestComponentContainer","useMeasureLayout","ComponentContainerContext","htmlEscapes","reUnescapedHtml","reHasUnescapedHtml","RegExp","source","escapeHTML","str","test","replace","chr","deprecatedRichTextPlaceholder","richTextWrapperClassName","DeprecatedRichText","forwardRef","Text","props","forwardedRef","id","name","html","htmlFromDesign","text","textFromDesign","fonts","width","height","left","right","top","bottom","center","className","stylesPresetsClassName","visible","opacity","rotation","verticalAlignment","isEditable","willChangeTransform","environment","current","withExternalLayout","positionSticky","positionStickyTop","positionStickyRight","positionStickyBottom","positionStickyLeft","__htmlStructure","__fromCanvasComponent","_forwardedOverrideId","_forwardedOverrides","_usesDOMRect","children","rest","parentSize","layoutId","fallbackLayoutRef","layoutRef","navigate","getRoute","currentRoute","preload","inCodeComponent","useContext","isOnCanvas","textOrOverride","forwardedOverrideId","override","innerHTML","escapedText","implicitPathVariables","innerHTMLWithReplacedFramerPageLinks","useMemo","useEffect","container","interceptPageLinks","event","anchorElement","target","metaKey","getAttribute","_blank","didNavigate","preventDefault","addEventListener","removeEventListener","useLoadFonts","isHidden","canvas","style","outline","display","flexDirection","justifyContent","convertVerticalAlignment","flexShrink","restrictedRenderTarget","hasRestrictions","frame","Unknown","isAutoSized","hasTransformTemplate","template","undefined","rotate","getNumber","toFixed","transform","x","y","minWidth","position","willChange","zIndex","positionFixed","positionAbsolute","Object","assign","createElement","div","ref","dangerouslySetInnerHTML","__html","fromCanvasComponent","containerRef","prevFontsRef","loadWebFontsFromSelectors","then","results","didLoadNewFonts","some","result","status","value","Loaded"],"sources":["../../../src/render/presentation/DeprecatedRichText.tsx"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}